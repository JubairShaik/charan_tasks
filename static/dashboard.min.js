async function fetchWeatherData(){try{const response=await fetch("http://127.0.0.1:5000/fetch-weather");if(!response.ok)throw new Error(`HTTP error! status: ${response.status}`);const data=await response.json();console.log("Weather Data:",data),document.getElementById("avg-temp").textContent=data.avg_temp.toFixed(2),document.getElementById("max-temp").textContent=data.max_temp.toFixed(2),document.getElementById("min-temp").textContent=data.min_temp.toFixed(2),document.getElementById("dominant-condition").textContent=data.dominant_condition,updateTempChart(data)}catch(error){console.error("Error fetching weather data:",error)}}let tempChart;function createTempChart(){const ctx=document.getElementById("tempChart").getContext("2d");tempChart=new Chart(ctx,{type:"line",data:{labels:[],datasets:[{label:"Avg Temp (째C)",data:[],borderColor:"rgba(75, 192, 192, 1)",fill:!1},{label:"Max Temp (째C)",data:[],borderColor:"rgba(255, 99, 132, 1)",fill:!1},{label:"Min Temp (째C)",data:[],borderColor:"rgba(54, 162, 235, 1)",fill:!1}]},options:{scales:{x:{title:{display:!0,text:"Time"}},y:{title:{display:!0,text:"Temperature (째C)"}}}}})}function updateTempChart(data){const currentTime=(new Date).toLocaleTimeString();tempChart.data.labels.push(currentTime),tempChart.data.datasets[0].data.push(data.avg_temp.toFixed(2)),tempChart.data.datasets[1].data.push(data.max_temp.toFixed(2)),tempChart.data.datasets[2].data.push(data.min_temp.toFixed(2)),tempChart.data.labels.length>10&&(tempChart.data.labels.shift(),tempChart.data.datasets.forEach((dataset=>dataset.data.shift()))),tempChart.update()}document.addEventListener("DOMContentLoaded",(()=>{createTempChart(),fetchWeatherData(),setInterval(fetchWeatherData,3e3)})),document.addEventListener("DOMContentLoaded",(()=>{createTempChart(),fetchWeatherData(),setInterval(fetchWeatherData,3e5)}));